<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Youth Activism ‚Äì Social Involvement Profile Survey</title>
  <meta name="description" content="Encuesta de perfil de participaci√≥n social" />
  <style>
    :root{
      --bgA:#f8fafc; --bgB:#ffffff; --txt:#08101a; --mut:rgba(8,10,20,.55);
      --stroke:rgba(15,20,40,.06); --accent1:#7c3aed; --accent2:#06b6d4;
      --card-radius:18px; --shadow:0 18px 40px rgba(10,20,40,.08);
      --focus:0 0 0 4px rgba(6,182,212,.18);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;color:var(--txt);background:linear-gradient(180deg,var(--bgA),var(--bgB));-webkit-font-smoothing:antialiased}
    .wrap{max-width:980px;margin:28px auto;padding:20px}
    .panel{background:#fff;border-radius:var(--card-radius);box-shadow:var(--shadow);border:1px solid var(--stroke);overflow:hidden}
    .top{display:flex;justify-content:space-between;align-items:center;padding:14px 18px;gap:12px}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:46px;height:46px;border-radius:12px;background:linear-gradient(135deg,var(--accent1),var(--accent2));display:grid;place-items:center;color:#fff;font-weight:700}
    h1{font-size:16px;margin:0}
    .chip{padding:8px 12px;border-radius:999px;background:rgba(0,0,0,.04);font-size:13px}
    .hero{display:grid;grid-template-columns:1fr 320px;gap:18px;padding:18px}
    @media (max-width:880px){.hero{grid-template-columns:1fr}}
    .pillRow{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    .pill{background:rgba(0,0,0,.03);padding:6px 10px;border-radius:999px;font-size:13px}
    .startRow{display:flex;gap:10px;margin-top:14px;flex-wrap:wrap}
    .btn{border:1px solid rgba(0,0,0,.08);background:#fff;padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:700}
    .btn.primary{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#fff;border:none}
    .mini{padding:12px;background:rgba(0,0,0,.02);border-radius:12px;font-size:14px}
    .cardHead{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid var(--stroke)}
    .cardBody{padding:16px}
    .prog{display:flex;align-items:center;gap:12px}
    .bar{width:220px;height:10px;border-radius:999px;background:rgba(0,0,0,.05);overflow:hidden;border:1px solid rgba(0,0,0,.04)}
    .fill{height:100%;width:0;background:linear-gradient(90deg,var(--accent1),var(--accent2));transition:width .35s ease}
    .ptxt{font-size:13px;color:var(--mut)}
    .questionTitle{margin:0 0 12px;font-size:18px}
    .options{display:flex;flex-direction:column;gap:10px}
    .optBtn{display:block;text-align:left;padding:12px;border-radius:12px;border:1px solid rgba(0,0,0,.06);background:#fff;cursor:pointer;font-weight:600}
    .optBtn:focus{outline:none;box-shadow:var(--focus)}
    .resultGrid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media (max-width:640px){.resultGrid{grid-template-columns:1fr}}
    .resultItem{padding:12px;border-radius:10px;background:linear-gradient(90deg,rgba(124,58,237,.04),rgba(6,182,212,.02));border:1px solid rgba(0,0,0,.04)}
    .controls{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
    .small{font-size:13px;color:var(--mut);margin-top:12px}
    .actionsRow{display:flex;gap:8px;margin-top:12px}
    .copyBtn{background:#111;color:#fff;padding:8px 10px;border-radius:8px;border:none;cursor:pointer}
    footer{margin-top:18px;text-align:center;color:var(--mut);font-size:13px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="panel">
      <div class="top">
        <div class="brand" aria-hidden="false">
          <div class="logo" aria-hidden="true">YA</div>
          <div>
            <h1>Youth Activism Survey</h1>
            <div style="font-size:13px;color:var(--mut)">Social involvement profile</div>
          </div>
        </div>
        <div class="chip" aria-hidden="true">6‚Äì8 minutes ‚Ä¢ No ‚Äúright/wrong‚Äù answers</div>
      </div>

      <div class="hero" role="region" aria-label="Introducci√≥n">
        <div>
          <h2 style="margin:0 0 8px">How do you show up when something matters?</h2>
          <p style="margin:0;color:var(--mut)">Answer real situations from school and social media. At the end you‚Äôll get a <strong>profile</strong> with strengths and one practical ‚Äúnext step‚Äù to try.</p>

          <div class="pillRow" aria-hidden="true">
            <span class="pill">üé® Colorful + visual</span>
            <span class="pill">‚ö° Fast</span>
            <span class="pill">üß† Reflective</span>
            <span class="pill">üó£Ô∏è Optional class discussion</span>
          </div>

          <div id="badges" style="margin-top:12px" aria-hidden="true"></div>

          <div class="startRow" role="group" aria-label="Acciones">
            <button id="startBtn" class="btn primary" aria-controls="surveyCard">Start the survey</button>
            <button id="previewBtn" class="btn" aria-controls="resultCard">Preview profiles</button>
            <button id="restartBtn" class="btn" style="display:none">Restart</button>
          </div>

          <div class="small">Privacy note: This survey does not collect names. Your results stay on this device unless you choose to copy/share them.</div>
        </div>

        <aside class="mini" aria-hidden="false">
          <h3 style="margin:0 0 8px">Teacher quick-use</h3>
          <ul style="margin:0 0 8px 18px;padding:0">
            <li>Students can take it individually or on the projector.</li>
            <li>At the end: screenshot the profile or copy text.</li>
            <li>1-minute reflection: ‚ÄúOne strength I have‚Ä¶ One step I can try‚Ä¶‚Äù</li>
          </ul>
          <div style="font-size:13px;color:var(--mut)">Tip: To edit questions, change the <code>QUESTIONS</code> array inside this file.</div>
        </aside>
      </div>
    </div>

    <!-- Survey card -->
    <section id="surveyCard" class="panel" style="margin-top:16px;display:none" role="region" aria-label="Survey">
      <div class="cardHead">
        <div>
          <div style="font-size:13px;color:var(--mut)"><strong id="qLabel">Question</strong> <span id="topicTag" style="margin-left:8px"></span></div>
        </div>
        <div class="prog" aria-hidden="false">
          <div class="bar" aria-hidden="true"><div id="fill" class="fill" style="width:0%"></div></div>
          <div class="ptxt" id="ptxt">0 / 0</div>
        </div>
      </div>
      <div class="cardBody" id="body" tabindex="0"></div>
    </section>

    <!-- Results card -->
    <section id="resultCard" class="panel" style="margin-top:16px;display:none" role="region" aria-label="Results">
      <div class="cardHead">
        <div><strong>Your profile</strong></div>
        <div class="ptxt">Done</div>
      </div>
      <div class="cardBody" id="resultBody"></div>
    </section>

    <footer>If you still see the old version after updating: refresh with <strong>Ctrl + F5</strong>.</footer>
  </div>

  <script>
    /* Data unchanged: same questions and scoring */
    const QUESTIONS = [
      {
        topic: "School",
        title: "You hear an offensive comment about someone in class. What do you do first?",
        options: [
          { title: "Stop it respectfully", pts: { voice: 2, leadership: 1 } },
          { title: "Check on the person", pts: { care: 2, voice: 1 } },
          { title: "Talk later calmly", pts: { voice: 2, info: 1 } },
          { title: "Get help right away", pts: { action: 2, leadership: 1 } },
        ]
      },
      {
        topic: "Social Media",
        title: "A viral video about a social issue shows up in your feed. What do you do?",
        options: [
          { title: "Verify it", pts: { info: 2, voice: 1 } },
          { title: "Comment thoughtfully", pts: { voice: 2, care: 1 } },
          { title: "Report if harmful", pts: { action: 1, info: 1 } },
          { title: "Create a response post", pts: { leadership: 2, voice: 1 } },
        ]
      },
      {
        topic: "Participation",
        title: "If your school runs an event and asks for help, you usually‚Ä¶",
        options: [
          { title: "Handle practical tasks", pts: { action: 2, leadership: 1 } },
          { title: "Do the promo", pts: { voice: 2, info: 1 } },
          { title: "Make it welcoming", pts: { care: 2, voice: 1 } },
          { title: "Research & propose", pts: { info: 2, action: 1 } },
        ]
      },
      {
        topic: "Conflict",
        title: "Your group is arguing and nobody understands each other. What do you do?",
        options: [
          { title: "Create fair turn-taking", pts: { voice: 2, care: 1 } },
          { title: "Divide clear roles", pts: { action: 2, leadership: 1 } },
          { title: "Ask for evidence", pts: { info: 2 } },
          { title: "Propose a plan fast", pts: { leadership: 2, action: 1 } },
        ]
      },
      {
        topic: "Impact",
        title: "Which project sounds most exciting to you right now?",
        options: [
          { title: "Improve something at school", pts: { action: 2, leadership: 1 } },
          { title: "Creative awareness campaign", pts: { voice: 2, info: 1 } },
          { title: "Support & belonging", pts: { care: 2, voice: 1 } },
          { title: "Survey & solutions", pts: { info: 2, action: 1 } },
        ]
      },
      {
        topic: "Your next step",
        title: "When I feel nervous or unmotivated, what helps me most is‚Ä¶",
        options: [
          { title: "Doing it with someone", pts: { care: 1, leadership: 1 } },
          { title: "A clear small step", pts: { info: 2 } },
          { title: "Seeing quick results", pts: { action: 2 } },
          { title: "Knowing it matters", pts: { leadership: 2, voice: 1 } },
        ]
      },
    ];

    /* State */
    let currentQuestionIndex = 0;
    let scores = { voice: 0, action: 0, leadership: 0, info: 0, care: 0 };

    /* Helpers */
    function escapeHtml(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#39;'); }

    function createBadge(text){
      const b = document.createElement('span');
      b.textContent = text;
      b.style.display = 'inline-block';
      b.style.padding = '6px 8px';
      b.style.marginRight = '6px';
      b.style.borderRadius = '999px';
      b.style.background = 'rgba(0,0,0,.03)';
      b.style.fontSize = '13px';
      return b;
    }

    function initBadges(){
      const container = document.getElementById('badges');
      container.innerHTML = '';
      ['VOICE','INFO','ACTION','LEADERSHIP','CARE'].forEach(t => container.appendChild(createBadge(t)));
    }

    /* Render question */
    function renderQuestion(){
      const q = QUESTIONS[currentQuestionIndex];
      document.getElementById('qLabel').textContent = `Question ${currentQuestionIndex + 1}`;
      document.getElementById('topicTag').textContent = q.topic;
      document.getElementById('ptxt').textContent = `${currentQuestionIndex + 1} / ${QUESTIONS.length}`;

      const denom = Math.max(1, QUESTIONS.length - 1);
      const percent = Math.round((currentQuestionIndex / denom) * 100);
      document.getElementById('fill').style.width = percent + '%';

      const body = document.getElementById('body');
      body.innerHTML = `<h3 class="questionTitle">${escapeHtml(q.title)}</h3>`;
      const opts = document.createElement('div');
      opts.className = 'options';

      q.options.forEach((opt, idx) => {
        const btn = document.createElement('button');
        btn.className = 'optBtn';
        btn.type = 'button';
        btn.innerHTML = `<span>${escapeHtml(opt.title)}</span>`;
        btn.setAttribute('aria-label', opt.title);
        btn.addEventListener('click', () => selectOption(idx));
        btn.addEventListener('keydown', (e) => {
          if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); selectOption(idx); }
        });
        opts.appendChild(btn);
      });

      body.appendChild(opts);
      // focus first option for keyboard users
      const first = opts.querySelector('.optBtn');
      if(first) first.focus();
    }

    /* Handle selection */
    function selectOption(index){
      const q = QUESTIONS[currentQuestionIndex];
      const opt = q.options[index];
      Object.keys(opt.pts).forEach(k => {
        if(scores.hasOwnProperty(k)) scores[k] += opt.pts[k];
        else scores[k] = opt.pts[k];
      });

      if(currentQuestionIndex < QUESTIONS.length - 1){
        currentQuestionIndex++;
        renderQuestion();
      } else {
        showResults();
      }
    }

    /* Show results */
    function showResults(preview=false){
      document.getElementById('surveyCard').style.display = 'none';
      document.getElementById('resultCard').style.display = 'block';
      document.getElementById('restartBtn').style.display = 'inline-block';

      const body = document.getElementById('resultBody');
      body.innerHTML = '';

      if(preview){
        body.innerHTML = `<h3 style="margin-top:0">Profiles Preview</h3>
          <div class="resultGrid">
            <div class="resultItem"><strong>Voice</strong><div style="margin-top:6px;color:var(--mut)">Speak up with clarity and empathy.</div></div>
            <div class="resultItem"><strong>Action</strong><div style="margin-top:6px;color:var(--mut)">Take practical steps to make change happen.</div></div>
            <div class="resultItem"><strong>Leadership</strong><div style="margin-top:6px;color:var(--mut)">Organize and motivate others.</div></div>
            <div class="resultItem"><strong>Info</strong><div style="margin-top:6px;color:var(--mut)">Research and verify before sharing.</div></div>
            <div class="resultItem"><strong>Care</strong><div style="margin-top:6px;color:var(--mut)">Support people and build belonging.</div></div>
          </div>`;
        addResultActions();
        return;
      }

      // ordenar por puntaje
      const entries = Object.entries(scores).sort((a,b) => b[1] - a[1]);
      const grid = document.createElement('div');
      grid.className = 'resultGrid';

      entries.forEach(([k,v]) => {
        const item = document.createElement('div');
        item.className = 'resultItem';
        item.innerHTML = `<strong style="text-transform:capitalize">${escapeHtml(k)}</strong>
                          <div style="margin-top:8px;color:var(--mut)">${v} points</div>`;
        grid.appendChild(item);
      });

      body.appendChild(grid);

      // next step basado en la fortaleza principal
      const top = entries[0];
      if(top){
        const tip = document.createElement('div');
        tip.style.marginTop = '12px';
        tip.style.padding = '12px';
        tip.style.borderRadius = '10px';
        tip.style.background = 'linear-gradient(90deg, rgba(124,58,237,.06), rgba(6,182,212,.04))';
        tip.innerHTML = `<strong>Next step</strong>: Try one small action that uses your <strong style="text-transform:capitalize">${escapeHtml(top[0])}</strong> strength.`;
        body.appendChild(tip);
      }

      addResultActions();
    }

    /* Add copy and restart controls under results */
    function addResultActions(){
      const body = document.getElementById('resultBody');
      const actions = document.createElement('div');
      actions.className = 'actionsRow';

      const copyBtn = document.createElement('button');
      copyBtn.className = 'copyBtn';
      copyBtn.textContent = 'Copy results';
      copyBtn.addEventListener('click', copyResults);

      const restart = document.getElementById('restartBtn');
      restart.addEventListener('click', resetSurvey);

      actions.appendChild(copyBtn);
      body.appendChild(actions);
    }

    /* Copy results to clipboard */
    function copyResults(){
      const entries = Object.entries(scores).sort((a,b) => b[1] - a[1]);
      let text = 'Youth Activism Survey Results\n';
      entries.forEach(([k,v]) => text += `${k}: ${v}\n`);
      const top = entries[0];
      if(top) text += `Next step: Try one small action that uses your ${top[0]} strength.\n`;
      navigator.clipboard?.writeText(text).then(() => {
        alert('Results copied to clipboard');
      }).catch(() => {
        alert('Unable to copy automatically. Select and copy the results manually.');
      });
    }

    /* Reset survey to start */
    function resetSurvey(){
      currentQuestionIndex = 0;
      scores = { voice: 0, action: 0, leadership: 0, info: 0, care: 0 };
      document.getElementById('resultCard').style.display = 'none';
      document.getElementById('surveyCard').style.display = 'block';
      document.getElementById('startPanel')?.scrollIntoView({behavior:'smooth'});
      renderQuestion();
    }

    /* Preview handler */
    function previewProfiles(){
      document.getElementById('startPanel')?.scrollIntoView({behavior:'smooth'});
      showResults(true);
    }

    /* Init and event wiring */
    document.getElementById('startBtn').addEventListener('click', () => {
      currentQuestionIndex = 0;
      scores = { voice: 0, action: 0, leadership: 0, info: 0, care: 0 };
      document.getElementById('surveyCard').style.display = 'block';
      document.getElementById('resultCard').style.display = 'none';
      document.getElementById('restartBtn').style.display = 'none';
      renderQuestion();
      document.getElementById('surveyCard').scrollIntoView({behavior:'smooth'});
    });

    document.getElementById('previewBtn').addEventListener('click', () => {
      previewProfiles();
      document.getElementById('resultCard').scrollIntoView({behavior:'smooth'});
    });

    document.getElementById('restartBtn').addEventListener('click', resetSurvey);

    // initialize UI
    initBadges();
  </script>
</body>
</html>
