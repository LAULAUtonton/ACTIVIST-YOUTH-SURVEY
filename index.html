<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Youth Activism â€” Encuesta interactiva (mejorada)</title>
<meta name="description" content="Encuesta interactiva para jÃ³venes: Voice, Info, Action, Leadership, Care" />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#071022;
    --card:#071827;
    --mut:#9fb0c6;
    --accent1:#ff6b6b;   /* coral */
    --accent2:#7c3aed;   /* purple */
    --accent3:#06b6d4;   /* cyan */
    --accent4:#ffd166;   /* yellow */
    --accent5:#4ade80;   /* green */
    --glass: rgba(255,255,255,0.03);
    --radius:18px;
    --shadow: 0 18px 50px rgba(2,6,23,0.7);
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial;background:
    radial-gradient(900px 400px at 10% 10%, rgba(124,58,237,0.12), transparent 20%),
    radial-gradient(900px 400px at 90% 30%, rgba(6,182,212,0.08), transparent 20%),
    var(--bg); color:#eaf6ff;-webkit-font-smoothing:antialiased}
  .wrap{max-width:980px;margin:28px auto;padding:22px}
  header{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:18px}
  .brand{display:flex;gap:14px;align-items:center}
  .logo{
    width:72px;height:72px;border-radius:14px;
    background:linear-gradient(135deg,var(--accent2),var(--accent3));
    display:grid;place-items:center;font-weight:900;color:white;font-size:22px;
    box-shadow:0 12px 40px rgba(124,58,237,0.18)
  }
  h1{font-size:22px;margin:0}
  .tagline{color:var(--mut);font-size:14px}
  .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:var(--radius);box-shadow:var(--shadow);border:1px solid rgba(255,255,255,0.03);overflow:hidden}
  .intro{display:grid;grid-template-columns:1fr 340px;gap:20px;padding:20px}
  @media (max-width:920px){.intro{grid-template-columns:1fr}}
  .pillRow{display:flex;flex-wrap:wrap;gap:10px;margin-top:12px}
  .pill{
    background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    padding:8px 12px;border-radius:999px;font-size:14px;color:var(--mut);display:inline-flex;align-items:center;gap:10px
  }
  .controls{display:flex;gap:12px;margin-top:16px;flex-wrap:wrap}
  .btn{
    padding:12px 16px;border-radius:14px;border:1px solid rgba(255,255,255,0.04);
    background:transparent;color:#eaf6ff;cursor:pointer;font-weight:800;font-size:15px;
    transition:transform .12s ease,box-shadow .12s ease
  }
  .btn:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(2,6,23,0.6)}
  .btn.primary{
    background:linear-gradient(90deg,var(--accent1),var(--accent3));
    border:none;color:white;box-shadow:0 12px 30px rgba(6,182,212,0.12)
  }
  .mini{padding:14px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px}
  .cardHead{display:flex;justify-content:space-between;align-items:center;padding:14px 18px;border-bottom:1px solid rgba(255,255,255,0.02)}
  .cardBody{padding:20px}
  .prog{display:flex;align-items:center;gap:14px}
  .bar{width:300px;height:14px;border-radius:999px;background:rgba(255,255,255,0.04);overflow:hidden;border:1px solid rgba(255,255,255,0.02)}
  .fill{height:100%;width:0;background:linear-gradient(90deg,var(--accent3),var(--accent2));transition:width .45s cubic-bezier(.2,.9,.2,1)}
  .ptxt{font-size:15px;color:var(--mut);font-weight:700}
  .questionTitle{margin:0 0 14px;font-size:22px;line-height:1.15}
  .options{display:grid;gap:14px}
  .optBtn{
    display:flex;align-items:center;gap:16px;padding:14px;border-radius:14px;border:1px solid rgba(255,255,255,0.03);
    background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));cursor:pointer;transition:transform .12s ease,box-shadow .12s ease;
    font-size:16px;font-weight:700;color:#eaf6ff
  }
  .optBtn:hover{transform:translateY(-8px);box-shadow:0 22px 50px rgba(2,6,23,0.7)}
  .optEmoji{
    width:64px;height:64px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    display:grid;place-items:center;font-size:30px;font-weight:800;color:#071022
  }
  .optText{flex:1}
  .optSub{font-size:14px;color:var(--mut);font-weight:600;margin-top:6px}
  .small{font-size:14px;color:var(--mut);margin-top:12px}
  .resultGrid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
  @media (max-width:640px){.resultGrid{grid-template-columns:1fr}}
  .resultItem{
    padding:14px;border-radius:12px;background:linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));
    border:1px solid rgba(255,255,255,0.02)
  }
  .barInner{height:16px;border-radius:999px;background:rgba(255,255,255,0.04);overflow:hidden;margin-top:10px}
  .barFill{height:100%;width:0;background:linear-gradient(90deg,var(--accent2),var(--accent5));transition:width .9s cubic-bezier(.2,.9,.2,1)}
  .actionsRow{display:flex;gap:10px;margin-top:14px;flex-wrap:wrap}
  .copyBtn{background:#071022;color:#fff;padding:10px 12px;border-radius:10px;border:none;cursor:pointer;font-weight:700}
  .avatarRow{display:flex;gap:12px;align-items:center;margin-top:14px}
  .avatar{width:64px;height:64px;border-radius:14px;background:linear-gradient(135deg,var(--accent3),var(--accent2));display:grid;place-items:center;font-weight:900;color:#071022;font-size:22px}
  .confetti{pointer-events:none;position:fixed;left:0;top:0;width:100%;height:100%;z-index:9999;display:none}
  .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true">YA</div>
        <div>
          <h1>Youth Activism</h1>
          <div class="tagline">Encuesta rÃ¡pida â€” descubre tu perfil</div>
        </div>
      </div>
      <div class="tagline">15 preguntas â€¢ 6â€“10 minutos</div>
    </header>

    <!-- Intro -->
    <section class="card" aria-labelledby="introTitle">
      <div class="intro">
        <div>
          <h2 id="introTitle" style="margin:0 0 8px;font-size:24px">Â¿CÃ³mo actÃºas cuando algo importa?</h2>
          <p style="margin:0;color:var(--mut);font-size:16px">Responde situaciones reales de escuela y redes. Al final verÃ¡s tus puntos fuertes en <strong>Voice</strong>, <strong>Info</strong>, <strong>Action</strong>, <strong>Leadership</strong> y <strong>Care</strong>.</p>

          <div class="pillRow" aria-hidden="true">
            <span class="pill">ğŸ¨ Visual</span>
            <span class="pill">âš¡ RÃ¡pido</span>
            <span class="pill">ğŸ§  Reflexivo</span>
            <span class="pill">ğŸ—£ï¸ Ideal para clase</span>
          </div>

          <div class="controls">
            <button id="startBtn" class="btn primary" aria-controls="surveyCard">Comenzar</button>
            <button id="previewBtn" class="btn" aria-controls="resultCard">Ver perfiles</button>
            <button id="restartBtn" class="btn" style="display:none">Reiniciar</button>
          </div>

          <div class="small">Consejo: usa Tab + Enter para navegar y responder. Los iconos son grandes para facilitar la lectura.</div>
        </div>

        <aside class="mini" aria-hidden="false">
          <div style="display:flex;align-items:center;justify-content:space-between">
            <strong style="font-size:16px">Uso rÃ¡pido para profes</strong>
            <div style="font-size:13px;color:var(--mut)">Editable</div>
          </div>
          <ul style="margin:10px 0 0 18px;padding:0;color:var(--mut);font-size:15px">
            <li>Individual o en proyector</li>
            <li>Al final: copiar resultados o hacer captura</li>
            <li>ReflexiÃ³n: "Una fortalezaâ€¦ Un paso a intentar"</li>
          </ul>
        </aside>
      </div>
    </section>

    <!-- Survey -->
    <section id="surveyCard" class="card" style="margin-top:18px;display:none" role="region" aria-label="Encuesta">
      <div class="cardHead">
        <div>
          <div style="font-size:15px;color:var(--mut)"><strong id="qLabel">Pregunta</strong> <span id="topicTag" style="margin-left:10px"></span></div>
        </div>
        <div class="prog" aria-hidden="false">
          <div class="bar" aria-hidden="true"><div id="fill" class="fill" style="width:0%"></div></div>
          <div class="ptxt" id="ptxt">0 / 15</div>
        </div>
      </div>
      <div class="cardBody" id="body" tabindex="0"></div>
    </section>

    <!-- Results -->
    <section id="resultCard" class="card" style="margin-top:18px;display:none" role="region" aria-label="Resultados">
      <div class="cardHead">
        <div><strong style="font-size:18px">Tu perfil</strong></div>
        <div class="ptxt">Â¡Listo!</div>
      </div>
      <div class="cardBody" id="resultBody"></div>
    </section>

    <div class="confetti" id="confetti"></div>
  </div>

<script>
  const QUESTIONS = [
    { topic:"School", title:"Escuchas un comentario ofensivo en clase. Â¿QuÃ© haces primero?", options:[
      {title:"Pararlo con respeto", pts:{voice:2, leadership:1}, emoji:"ğŸ—£ï¸"},
      {title:"Comprobar cÃ³mo estÃ¡ la persona afectada", pts:{care:2, voice:1}, emoji:"ğŸ¤"},
      {title:"Hablar con la persona despuÃ©s en privado", pts:{voice:1, info:1}, emoji:"ğŸ’¬"},
      {title:"Avisar a un profesor si es grave", pts:{action:2, leadership:1}, emoji:"ğŸ“£"},
    ]},
    { topic:"Social Media", title:"Ves un vÃ­deo viral que parece manipulado. Â¿QuÃ© haces?", options:[
      {title:"Verificar antes de compartir", pts:{info:2}, emoji:"ğŸ”"},
      {title:"Comentar corrigiendo con respeto", pts:{voice:2, info:1}, emoji:"âœï¸"},
      {title:"Reportarlo si es daÃ±ino", pts:{action:2}, emoji:"ğŸš©"},
      {title:"Crear una respuesta informativa", pts:{leadership:2, voice:1}, emoji:"ğŸ¬"},
    ]},
    { topic:"Participation", title:"Tu colegio pide ayuda para un evento. Sueles:", options:[
      {title:"Encargarte de tareas prÃ¡cticas", pts:{action:2, leadership:1}, emoji:"ğŸ› ï¸"},
      {title:"Hacer la promociÃ³n en redes", pts:{voice:2, info:1}, emoji:"ğŸ“£"},
      {title:"Asegurar que sea acogedor", pts:{care:2, voice:1}, emoji:"ğŸ¤—"},
      {title:"Investigar y proponer mejoras", pts:{info:2, action:1}, emoji:"ğŸ“Š"},
    ]},
    { topic:"Conflict", title:"Un grupo discute y nadie se entiende. Â¿QuÃ© haces?", options:[
      {title:"Crear turnos justos para hablar", pts:{voice:2, care:1}, emoji:"ğŸ§­"},
      {title:"Dividir roles claros", pts:{action:2, leadership:1}, emoji:"ğŸ§©"},
      {title:"Pedir pruebas y datos", pts:{info:2}, emoji:"ğŸ“š"},
      {title:"Proponer un plan rÃ¡pido", pts:{leadership:2, action:1}, emoji:"âš¡"},
    ]},
    { topic:"Impact", title:"QuÃ© proyecto te motiva mÃ¡s ahora?", options:[
      {title:"Mejorar algo prÃ¡ctico en el cole", pts:{action:2, leadership:1}, emoji:"ğŸ«"},
      {title:"CampaÃ±a creativa de concienciaciÃ³n", pts:{voice:2, info:1}, emoji:"ğŸ¨"},
      {title:"Apoyar el sentido de pertenencia", pts:{care:2, voice:1}, emoji:"ğŸ’"},
      {title:"Encuesta y soluciones", pts:{info:2, action:1}, emoji:"ğŸ“‹"},
    ]},
    { topic:"Motivation", title:"Si te sientes nervioso, te ayuda mÃ¡s:", options:[
      {title:"Hacerlo con alguien", pts:{care:1, leadership:1}, emoji:"ğŸ‘¥"},
      {title:"Un paso pequeÃ±o y claro", pts:{info:2}, emoji:"ğŸªœ"},
      {title:"Ver resultados rÃ¡pidos", pts:{action:2}, emoji:"âš™ï¸"},
      {title:"Recordar por quÃ© importa", pts:{leadership:2, voice:1}, emoji:"ğŸ”¥"},
    ]},
    { topic:"Listening", title:"Alguien comparte un problema personal. TÃº:", options:[
      {title:"Escuchas y repites para confirmar", pts:{care:2, voice:1}, emoji:"ğŸ‘‚"},
      {title:"Haces preguntas para entender", pts:{info:2}, emoji:"â“"},
      {title:"Ofreces ayudar a actuar", pts:{action:2}, emoji:"ğŸ‘"},
      {title:"Organizas apoyo con otros", pts:{leadership:2}, emoji:"ğŸ¤"},
    ]},
    { topic:"Online Safety", title:"Ves acoso en lÃ­nea. Â¿QuÃ© haces?", options:[
      {title:"Reportas y bloqueas", pts:{action:2}, emoji:"â›”"},
      {title:"Lo seÃ±alas con respeto", pts:{voice:2, care:1}, emoji:"ğŸ—¨ï¸"},
      {title:"Guardas pruebas y aconsejas a la vÃ­ctima", pts:{info:2, care:1}, emoji:"ğŸ“"},
      {title:"Coordinar respuesta grupal", pts:{leadership:2}, emoji:"ğŸ›¡ï¸"},
    ]},
    { topic:"Planning", title:"Al planear un evento te centras en:", options:[
      {title:"LogÃ­stica y tareas", pts:{action:2}, emoji:"ğŸ—‚ï¸"},
      {title:"Mensajes y alcance", pts:{voice:2, info:1}, emoji:"ğŸ“£"},
      {title:"Que sea inclusivo", pts:{care:2}, emoji:"ğŸŒˆ"},
      {title:"Reclutar y liderar", pts:{leadership:2}, emoji:"ğŸ‘‘"},
    ]},
    { topic:"Research", title:"Antes de compartir una afirmaciÃ³n, tÃº:", options:[
      {title:"Compruebas fuentes fiables", pts:{info:2}, emoji:"ğŸ”¬"},
      {title:"Aportas contexto y opiniÃ³n", pts:{voice:2}, emoji:"ğŸ“"},
      {title:"Animar a otros a verificar", pts:{leadership:1, info:1}, emoji:"ğŸ“¢"},
      {title:"Reportar si es daÃ±ino", pts:{action:1, info:1}, emoji:"âš ï¸"},
    ]},
    { topic:"Support", title:"Un compaÃ±ero estÃ¡ excluido. TÃº:", options:[
      {title:"Lo invitas y escuchas", pts:{care:2}, emoji:"ğŸ¤—"},
      {title:"Hablas con el grupo", pts:{voice:2, care:1}, emoji:"ğŸ—£ï¸"},
      {title:"Organizas actividad inclusiva", pts:{leadership:2, action:1}, emoji:"ğŸ¯"},
      {title:"Investigas por quÃ© pasa", pts:{info:2}, emoji:"ğŸ”"},
    ]},
    { topic:"Visibility", title:"Para concienciar prefieres:", options:[
      {title:"Mensaje pÃºblico potente", pts:{voice:2, leadership:1}, emoji:"ğŸ“¢"},
      {title:"Compartir datos verificados", pts:{info:2}, emoji:"ğŸ“ˆ"},
      {title:"Actividad prÃ¡ctica", pts:{action:2}, emoji:"ğŸ› ï¸"},
      {title:"Poner voces afectadas al frente", pts:{care:2}, emoji:"ğŸ¤"},
    ]},
    { topic:"Decision", title:"Si la decisiÃ³n no estÃ¡ clara, tÃº:", options:[
      {title:"ReÃºnes datos y opciones", pts:{info:2}, emoji:"ğŸ“š"},
      {title:"Haces una votaciÃ³n rÃ¡pida", pts:{action:2}, emoji:"ğŸ—³ï¸"},
      {title:"Aseguras que todos hablen", pts:{voice:2, care:1}, emoji:"ğŸ”"},
      {title:"Lideras una discusiÃ³n estructurada", pts:{leadership:2}, emoji:"ğŸ§­"},
    ]},
    { topic:"Follow-through", title:"Tras una acciÃ³n exitosa, tÃº:", options:[
      {title:"Documentas y compartes lo aprendido", pts:{info:2, voice:1}, emoji:"ğŸ“"},
      {title:"Agradeces y celebras al equipo", pts:{care:2}, emoji:"ğŸ‰"},
      {title:"Planificas el siguiente paso", pts:{action:2}, emoji:"ğŸ“…"},
      {title:"Invitas a otros a liderar la fase siguiente", pts:{leadership:2}, emoji:"ğŸ¤"},
    ]},
    { topic:"Growth", title:"Para mejorar en activismo tÃº:", options:[
      {title:"Practicas hablar en pÃºblico", pts:{voice:2}, emoji:"ğŸ™ï¸"},
      {title:"Estudias casos y datos", pts:{info:2}, emoji:"ğŸ“–"},
      {title:"Te apuntas a roles prÃ¡cticos", pts:{action:2}, emoji:"ğŸ§°"},
      {title:"Mentoras y organizas a otros", pts:{leadership:2, care:1}, emoji:"ğŸŒ±"},
    ]},
  ];

  let currentQuestionIndex = 0;
  let scores = { voice:0, info:0, action:0, leadership:0, care:0 };

  function $(id){ return document.getElementById(id); }
  function escapeHtml(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

  function initBadges(){
    const intro = document.querySelector('.intro');
    if(!intro) return;
    let container = document.getElementById('badges');
    if(!container){
      container = document.createElement('div'); container.id='badges'; container.style.marginTop='12px';
      intro.firstElementChild.appendChild(container);
    }
    container.innerHTML = '';
    ['VOICE','INFO','ACTION','LEADERSHIP','CARE'].forEach(t=>{
      const b = document.createElement('span'); b.className='pill'; b.textContent = t; container.appendChild(b);
    });
  }

  function renderQuestion(){
    const q = QUESTIONS[currentQuestionIndex];
    $('qLabel').textContent = `Pregunta ${currentQuestionIndex + 1}`;
    $('topicTag').textContent = q.topic;
    $('ptxt').textContent = `${currentQuestionIndex + 1} / ${QUESTIONS.length}`;
    const denom = Math.max(1, QUESTIONS.length - 1);
    const percent = Math.round((currentQuestionIndex / denom) * 100);
    $('fill').style.width = percent + '%';

    const body = $('body'); body.innerHTML = '';
    const title = document.createElement('h3'); title.className='questionTitle'; title.innerHTML = escapeHtml(q.title);
    body.appendChild(title);

    const opts = document.createElement('div'); opts.className='options';
    q.options.forEach((opt, idx)=>{
      const b = document.createElement('button'); b.type='button'; b.className='optBtn'; b.setAttribute('aria-label', opt.title);
      b.innerHTML = `<div class="optEmoji">${opt.emoji}</div><div class="optText">${escapeHtml(opt.title)}<div class="optSub"></div></div>`;
      b.addEventListener('click', ()=> selectOption(idx));
      b.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') { e.preventDefault(); selectOption(idx); }});
      opts.appendChild(b);
    });
    body.appendChild(opts);
    const first = opts.querySelector('.optBtn'); if(first) first.focus();
  }

  function selectOption(index){
    const q = QUESTIONS[currentQuestionIndex];
    const opt = q.options[index];
    Object.keys(opt.pts).forEach(k=>{
      if(scores.hasOwnProperty(k)) scores[k] += opt.pts[k]; else scores[k] = opt.pts[k];
    });

    if(currentQuestionIndex < QUESTIONS.length - 1){
      currentQuestionIndex++;
      renderQuestion();
    } else {
      showResults();
      celebrate();
    }
  }

  function showResults(preview=false){
    $('surveyCard').style.display = 'none';
    $('resultCard').style.display = 'block';
    $('restartBtn').style.display = 'inline-block';
    const body = $('resultBody'); body.innerHTML = '';

    if(preview){
      body.innerHTML = `<h3 style="margin-top:0;font-size:20px">Perfiles (vista previa)</h3>
        <div class="resultGrid">
          <div class="resultItem"><strong>Voice</strong><div style="margin-top:8px;color:var(--mut)">Hablar con claridad y respeto.</div></div>
          <div class="resultItem"><strong>Info</strong><div style="margin-top:8px;color:var(--mut)">Investigar y verificar antes de compartir.</div></div>
          <div class="resultItem"><strong>Action</strong><div style="margin-top:8px;color:var(--mut)">Tomar pasos prÃ¡cticos para cambiar cosas.</div></div>
          <div class="resultItem"><strong>Leadership</strong><div style="margin-top:8px;color:var(--mut)">Organizar y motivar a otros.</div></div>
          <div class="resultItem"><strong>Care</strong><div style="margin-top:8px;color:var(--mut)">Apoyar a las personas y crear pertenencia.</div></div>
        </div>`;
      addResultActions();
      return;
    }

    const entries = Object.entries(scores).sort((a,b)=> b[1]-a[1]);
    const grid = document.createElement('div'); grid.className='resultGrid';
    entries.forEach(([k,v])=>{
      const item = document.createElement('div'); item.className='resultItem';
      item.innerHTML = `<strong style="text-transform:capitalize">${escapeHtml(k)}</strong>
        <div style="margin-top:8px;color:var(--mut);font-weight:700">${v} pts</div>
        <div class="barInner"><div class="barFill" style="width:${Math.min(100, v*10)}%"></div></div>`;
      grid.appendChild(item);
    });
    body.appendChild(grid);

    const top = entries[0];
    if(top){
      const tip = document.createElement('div');
      tip.style.marginTop='14px'; tip.style.padding='14px'; tip.style.borderRadius='12px';
      tip.style.background='linear-gradient(90deg, rgba(124,58,237,0.06), rgba(6,182,212,0.03))';
      tip.innerHTML = `<strong style="font-size:16px">PrÃ³ximo paso</strong>: prueba una acciÃ³n pequeÃ±a que use tu fortaleza <strong style="text-transform:capitalize">${escapeHtml(top[0])}</strong>.`;
      body.appendChild(tip);
    }
    addResultActions();
  }

  function addResultActions(){
    const body = $('resultBody');
    const actions = document.createElement('div'); actions.className='actionsRow';
    const copyBtn = document.createElement('button'); copyBtn.className='copyBtn'; copyBtn.textContent='Copiar resultados';
    copyBtn.addEventListener('click', copyResults);
    actions.appendChild(copyBtn);
    body.appendChild(actions);
  }

  function copyResults(){
    const entries = Object.entries(scores).sort((a,b)=> b[1]-a[1]);
    let text = 'Youth Activism â€” Resultados\n';
    entries.forEach(([k,v])=> text += `${k}: ${v}\n`);
    const top = entries[0]; if(top) text += `Siguiente paso: prueba una acciÃ³n con ${top[0]}\n`;
    navigator.clipboard?.writeText(text).then(()=> alert('Resultados copiados al portapapeles')).catch(()=> alert('No se pudo copiar automÃ¡ticamente.'));
  }

  function resetSurvey(){
    currentQuestionIndex = 0;
    scores = { voice:0, info:0, action:0, leadership:0, care:0 };
    $('resultCard').style.display = 'none';
    $('surveyCard').style.display = 'block';
    $('restartBtn').style.display = 'none';
    renderQuestion();
    window.scrollTo({top:0,behavior:'smooth'});
  }

  function previewProfiles(){
    $('surveyCard').style.display = 'none';
    showResults(true);
    window.scrollTo({top:0,behavior:'smooth'});
  }

  function celebrate(){
    const conf = $('confetti'); conf.innerHTML=''; conf.style.display='block';
    const colors = ['#ff6b6b','#7c3aed','#06b6d4','#ffd166','#4ade80'];
    for(let i=0;i<40;i++){
      const el = document.createElement('div');
      el.style.position='absolute';
      el.style.left = Math.random()*100 + '%';
      el.style.top = '-10%';
      el.style.width = (8+Math.random()*12)+'px';
      el.style.height = el.style.width;
      el.style.background = colors[Math.floor(Math.random()*colors.length)];
      el.style.opacity = 0.95;
      el.style.borderRadius = '3px';
      el.style.transform = `rotate(${Math.random()*360}deg)`;
      el.style.transition = `transform 1.6s linear, top 1.6s cubic-bezier(.2,.9,.2,1), opacity 1.6s linear`;
      conf.appendChild(el);
      setTimeout(()=> {
        el.style.top = (60 + Math.random()*40) + '%';
        el.style.transform = `translateY(0) rotate(${Math.random()*720}deg)`;
        el.style.opacity = 0.9;
      }, 20 + i*10);
      setTimeout(()=> { el.style.opacity = 0; }, 1800 + i*10);
    }
    setTimeout(()=> { conf.style.display='none'; conf.innerHTML=''; }, 2600);
  }

  $('startBtn').addEventListener('click', ()=>{
    currentQuestionIndex = 0;
    scores = { voice:0, info:0, action:0, leadership:0, care:0 };
    $('surveyCard').style.display = 'block';
    $('resultCard').style.display = 'none';
    $('restartBtn').style.display = 'none';
    renderQuestion();
    window.scrollTo({top:0,behavior:'smooth'});
  });
  $('previewBtn').addEventListener('click', previewProfiles);
  $('restartBtn').addEventListener('click', resetSurvey);

  (function init(){ initBadges(); $('ptxt').textContent = `0 / ${QUESTIONS.length}`; })();
</script>
</body>
</html>
